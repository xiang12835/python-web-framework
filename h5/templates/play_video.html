<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
  <title>必胜公考-课程分享</title>
  <script src="/static/js/jquery-1.11.3.min.js"></script>
  <script src="https://qzonestyle.gtimg.cn/open/qcloud/video/h5/h5connect.js" charset="utf-8"></script>
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }
    a{
      text-decoration:none;
    }
    .fl{
      float:left;
    }
    .fr{
      float:right;
    }
    .clearfix::after{
      content:"";
      display:block;
      clear:both;
    }

    .class_list .class_list_title {
      padding: 10px 10px 10px 15px;
      display: flex;
      -webkit-display: flex;
      border-bottom: 1px solid #ccc;
    }

    .class_list .class_list_title .class_list_title_img {
      width: 22px;
      height: 22px;
    }

    .class_list .class_list_title p {
      font-family: PingFangSC-Medium;
      font-size: 16px;
      color: #353535;
      /*letter-spacing: -0.78px;*/
      height: 100%;
      align-items: center;
      -webkit-align-items: center;
      margin-left: 10px;
      line-height: 22px;
    }

    .course_item {
      display: flex;
      -webkit-display: flex;
    }

    .course_item .item_order {
      width: 70px;
      height: 70px;
      position: relative;
      display: flex;
      -webkit-display: flex;
      justify-content: center;
      align-items: center;
      -webkit-justify-content: center;
      -webkit-align-items: center;
    }

    .course_item .item_order p {
      display: flex;
      align-items: center;
      justify-content: center;
      -webkit-display: flex;
      -webkit-align-items: center;
      -webkit-justify-content: center;
      font-family: PingFangSC-Semibold;
      font-size: 18px;
      color: #ccc;
    }

    .course_item .item_order img {
      /*display: none;*/
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto;
      width: 24px;
      height: 24px;
      background-color: #fff;
    }

    .course_item.playing .item_order img {
      display: block;
    }

    .course_item .item_name {
      width: 100%;
      border-bottom: 1px solid #ccc;
      -webkit-display: flex;
      display: flex;
      justify-content: center;
      flex-direction: column;
      -webkit-justify-content: center;
      -webkit-flex-direction: column;
    }

    .course_item .item_name .lesson_name p {
      font-family: PingFangSC-Regular;
      font-size: 16px;
      color: #353535;
      display: flex;
      -webkit-display: flex;
    }

    .course_item .item_name .lesson_time p {
      opacity: 0.8;
      font-family: PingFangSC-Regular;
      font-size: 12px;
      color: #999;
    }

    .course_item .item_name .lesson_time {
      margin-top: 8px;
    }

    #play_video_box {
      width: 100%;
      min-height: 180px;
      background-color: #333;
    }

    #play_video_box video {
      width: 100%;
      margin: auto;
    }

    a {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
}

    footer {
        position:fixed;
        bottom:0;
        left:0;
        padding:10px;
        background:rgba(0,0,0,0.5);
        height:40px;
        width:100%;
    }
    footer a{
        display:block;
    }

    footer a .logo{
        width:40px;
        height:40px;
        border:none;
        margin-right:5px;
        /*background:cyan;*/
    }
    footer a p{
        padding-left:5px;
    }
    footer a p b {
        font-size:14px;
        line-height:20px;
        font-weight:600;
        font-family:PingFangSC-Medium;
        letter-spacing:0;
        color:#fff;
    }
    footer a .btn_load{
        display:inline-block;
        width:80px;
        line-height:30px;
        background: #ffc863;
        font-family:PingFangSC-Semibold;
        font-size:14px;
        text-align:center;
        color:#fff;
        letter-spacing:0;
        text-shadow:1px 1px 0 #FF9E4D;
        float:right;
        border-radius:3px;
        margin-top:4px;
    }
    footer a .btn_close{
        width:20px;
        height:20px;
        float:right;
        margin-top:10px;
        margin-right:20px;
        margin-left:10px;
    }

  </style>
</head>

<body>
  <div id="play_video_box">
    <div id="video"></div>
  </div>
  <div class="class_list">
    <div class="class_list_title">
      <image src="http://img.winlesson.com/img/list.png" class="class_list_title_img"></image>
      <p>课程列表</p>
    </div>

    <div>
      {% for video in videoList %}
      <div class="course_item" data-url="{{video['videoAdressMp4Bq']}}" data-video-time="100">
        <div class="item_order">
          <span>{{video["videoIndex"]}}</span>
          <img src="http://img.winlesson.com/img/playing_icon.png">
        </div>
        <!-- 视频信息：名称，播放时间 -->
        <div class="item_name">
          <div class="lesson_name">
            <!-- 需要修改：视频路径 -->
            <a style="text-decoration:none;" href="javascript:void(0)" >
              <p>
                {{video['videoName']}}
              </p>
            </a>
          </div>
          <div class="lesson_time">
            {{video['duration']}}
          </div>
        </div>
      </div>
      {% end %}
<!---->
      <!--<div class="course_item" data-url="http://4402.vod.myqcloud.com/4402_56c5e2e00eab11e7897b4f91b042649d.f0.mp4" data-video-time="200">-->
        <!--<div class="item_order">-->
           <!--<span>2</span>-->
          <!--<img src="http://img.winlesson.com/img/playing_icon.png">-->
        <!--</div>-->
        <!--&lt;!&ndash; 视频信息：名称，播放时间 &ndash;&gt;-->
        <!--<div class="item_name">-->
          <!--<div class="lesson_name">-->
            <!--&lt;!&ndash; 需要修改：视频路径 &ndash;&gt;-->
            <!--<a style="text-decoration:none;" href="javascript:void(0)" >-->
              <!--<p>-->
                <!--课程名字-->
              <!--</p>-->
            <!--</a>-->
          <!--</div>-->
          <!--<div class="lesson_time">-->
            <!--10:20-->
          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
    </div>

    <!--<video style="width:100%;" src="http://4402.vod.myqcloud.com/4402_aa7c1d9afdb811e6897b4f91b042649d.f20.mp4" controls></video>-->

      <footer>
      <a href="http://api.msg.platform.winlesson.com/qrcode/2" class="clearfix">
          <img class="logo fl" src="http://i.winlesson.com/images/img/applogo1024@2x.png" alt="">
          <p  class="fl">
              <b>下载必胜公考APP</b>
              <br/>
              <b> 获取最新公考干货 </b>
          </p>
          <img src="http://i.winlesson.com/images/img/white@1x.png" alt="" class="btn_close">
          <span class="btn_load">立即下载</span>
      </a>
  </footer>
  </div>

</body>
<script type="text/javascript">
  $('#play_video_box').height($(this).width()*0.56);

  function playMedia( url, timeLength)
  {

    document.documentElement.scrollTop = document.body.scrollTop = 0; //回到页面顶部
    // $("#video").empty(); //移除#video所有内容
    var i = 0;

    var player = new qcVideo.Player("video",
    {
      "app_id": "0",
      // "auto_play": 1, //自动播放 仅支持pc端
      "width": 880, //宽
      "height": 495, //高
      "disable_full_screen": 1, //支持全屏
      "disable_drag": 0, //允许拖动
      "stop_time": 180,
      // "remember": 1,
      "stretch_patch":true,
      "hide_h5_setting":true,//隐藏
      "WMode": "opaque", //窗口不透明
      "third_video":
      {
        // 'duration': timeLength, //视频时长
        'urls':
        {
          20: url
        }
      }
    },{
      playStatus:function(status){
        console.log(status)
        if(status == 'stop'){
          alert('试听结束')
        }
        if(status=='ready'){
          // $('.trump-play-controller').trigger('click')
        //   $('.trump-play-controller').trigger('click')
          //player.play();
        }
      }
    });
    //player.play();
  }

  $(document).ready(function(){
    var init_url = $('.course_item').attr('data-url');//初始化的视频URL
    var init_video_time = $('.course_item').attr('data-video-time');
    //alert(init_url);
    //alert(init_video_time);
    playMedia(init_url,init_video_time);
  })
  

  $('.course_item .item_order span').show()
  $('.course_item .item_order span:eq(0)').hide()

    $('.course_item .item_order img').hide()
  $('.course_item .item_order img:eq(0)').show()

  $('.course_item').on('click',function(){   //点击获取URL
    var url = $(this).attr('data-url')
    var video_time = $(this).attr('data-video-time')
    playMedia(url,video_time)


    $('.course_item .item_order span').show()    //切换 播放标志
    $(this).find('.item_order span').hide()

    $('.course_item .item_order img').hide()
    $(this).find('.item_order img').show()
  })



  $('.btn_close').click(function(){
        $('footer').hide();
        return false;
   });
</script>

</html>

