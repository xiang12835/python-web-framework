<!DOCTYPE html>
<html>
<head>
 <title>必胜课-付款</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <!--<script src="/js/jquery-3.1.1.min.js"></script>-->
<script type="text/javascript">
function jsApiCall(){
   WeixinJSBridge.invoke(
       'getBrandWCPayRequest', {
           "appId": "{{appId}}",   //公众号名称，由商户传入
           "timeStamp": "{{timeStamp}}",//时间戳，自1970年以来的秒数
           "nonceStr": "{{nonceStr}}",//随机串
           "package": "{{package}}",
           "signType": "{{signType}}",//微信签名方式:
           "paySign": "{{paySign}}"   //微信签名
       },
       function (res) {
           if (res.err_msg == "get_brand_wcpay_request:ok") {
               window.location.href="/api/pay/result";

           }else if (res.err_msg == "get_brand_wcpay_request:cancel")  {
                alert("支付过程中用户取消");
            }else{
               //支付失败
               alert(res.err_msg)
            }

       }
   );
}

function callpay() {
    if (typeof WeixinJSBridge == "undefined"){
        if( document.addEventListener ){
            document.addEventListener('WeixinJSBridgeReady', jsApiCall, false);
        }else if (document.attachEvent){
            document.attachEvent('WeixinJSBridgeReady', jsApiCall);
            document.attachEvent('onWeixinJSBridgeReady', jsApiCall);
        }
    }else{
        jsApiCall();
    }
}
</script>

<script>
  window.onload = callpay;
</script>

</head>

<!--<body>-->
<!--打印出参数-->
<!--<h1>微信jsapi支付 1分钱</h1>-->
<!--<a>Appid:   {{appId}}</a><br>-->
<!--<a>TimeStamp:   {{timeStamp}}</a><br>-->
<!--<a>Nonce_str:   {{nonceStr}}</a><br>-->
<!--<a>Package: {{package}}</a><br>-->
<!--<a>SignType:    {{signType}}</a><br>-->
<!--<a>PaySign: {{paySign}}</a><br>-->
<!--<body>-->

</body>

 </body>
</html>