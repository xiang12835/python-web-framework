<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>邀请有礼</title>
  <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
  <script type="text/javascript" src="config.js"></script>
  <script type="text/javascript" src="weixin.js"></script>
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }
    body {
      margin: 0;
      font-family: PingFangSC-Regular;
      font-size: 14px;
      color: #333;
      text-align: center;
      position: relative;
      padding: 1px 0;
    }
    ul, li {
      list-style: none;
    }
    .main {
      margin: auto;
      max-width: 680px;
    }
    img {
      display: block;
      margin: auto;
      width: 100%;
    }
    .dpr3 {
      display: none;
    }
    @media screen and (min-resolution: 3dppx) {
      .dpr2 {
        display: none;
      }
      .dpr3 {
        display: block;
      }
    }
    #head {
      position: relative;
      margin-bottom: 10px;
    }
    .circle_frame {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      margin: auto;
    }
    h5#username {
      font-family: PingFangSC-Medium;
      font-size: 16px;
      color: #333;
      letter-spacing: 0;
      margin-top: 2px;
    }
    span.bg {
      background-color: #ffef93;
    }
    .fo {
      color: #e37d28;
      font-weight: bold;
    }
    .grey {
      font-family: PingFangSC-Regular;
      font-size: 12px;
      color: #999999;
      letter-spacing: 0;
    }
    .adver img {
      width: 30%;
    }
    img.book {
      width: 150px;
      margin: 5px auto;
    }
    #phone_num {
      box-sizing: border-box;
      margin-top: 40px;
      margin-bottom: 20px;
      background: #fff;
      border: 1px solid #E5E5E5;
      width: 280px;
      height: 40px;
      padding: 10px;
      line-height: 20px;
      text-align: center;
    }
    .small {
      color: #999;
      font-size: 12px;
      line-height: 14px;
    }
    .sub_list {
      display: flex;
      margin: 25px auto;
    }
    .sub_list li {
      flex: 1 0 0;
    }
    .sub_list li img {
      width: 30px;
      height: 30px;
      margin-bottom: 15px;
    }
    .sub_list li h5 {
      font-family: PingFangSC-Medium;
      font-size: 14px;
      color: #333333;
      letter-spacing: 0;
      margin-bottom: 5px;
    }
    .sub_list li p {
      font-family: PingFangSC-Regular;
      font-size: 10px;
      color: #333333;
      letter-spacing: 0;
      line-height: 14px;
      margin-bottom: 5px;
    }
    #submit {
      width: 160px;
      margin: auto auto 8px;
      cursor: pointer;
    }
    .icon img {
      width: 72px;
      margin-top: 32px;
      margin-bottom: 10px;
    }
    .rule li {
      margin: 10px 15px;
      text-align: left;
    }
    .invi {
      margin-top: 28px;
      margin-bottom: 16px;
      text-align: center;
    }
    .invi li {
      display: inline-block;
      vertical-align: top;
    }
    .invi li:first-child {
      margin-right: 40px;
    }
    .invi .circle_frame {
      width: 60px;
      height: 60px;
      background: #f2f2f2 url("img/add@2x.png") no-repeat center/22px 22px;
    }
    .invi h5 {
      font-family: PingFangSC-Regular;
      font-size: 14px;
      color: #333333;
      letter-spacing: 0;
      line-height: 24px;
    }
    .invi p {
      font-family: PingFangSC-Regular;
      font-size: 12px;
      color: #FE6B30;
      letter-spacing: 0;
      line-height: 24px;
    }
    .invi .empty h5 {
      color: #CCCCCC;
    }
    #mask {
      background: rgba(0, 0, 0, .7) url("img/share_bg@3x.png") no-repeat top right/100% auto;
      width: 100%;
      height: 100%;
      min-height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      display: none;
    }

  </style>
</head>

<body>
  <div class="main">
    <header id="head">
      <img class="dpr2" src="img/header_bg@2x.png" />
      <img class="dpr3" src="img/header_bg@3x.png" /> </header>
    <p class="adver grey">
      <img class="dpr2" src="img/gift@2x.png" />
      <img class="dpr3" src="img/gift@3x.png" />均为电子版档案</p>
    <ul class="sub_list">
      <li>
        <img class="dpr2" src="img/sub1@2x.png" />
        <img class="dpr3" src="img/sub1@3x.png" />
        <h5>40套最新真题</h5>
        <p>涵盖近3年国考及各地省考真题试卷</p>
      </li>
      <li>
        <img class="dpr2" src="img/sub2@2x.png" />
        <img class="dpr3" src="img/sub2@3x.png" />
        <h5>公考知识图谱</h5>
        <p>行测图谱 高频考点系统梳理</p>
        <p>申论图谱 五大题型特点及答题踩分点</p>
      </li>
      <li>
        <img class="dpr2" src="img/sub3@2x.png" />
        <img class="dpr3" src="img/sub3@3x.png" />
        <h5>公务员考试
          <br/>白皮书</h5>
        <p>包含报考指南、岗位介绍、面试分数线</p>
      </li>
    </ul>
    <div id="submit" class="pointer">
      <img class="submit dpr2" src="img/invitation@2x.png" />
      <img class="submit dpr3" src="img/invitation@3x.png" /> </div>
    <p class="grey">被邀请的好友，将获赠大礼包中的
      <br/><b>《公务员考试白皮书》</b></p>
    <p class="icon grey">
      <img class="dpr2" src="img/rule@2x.png" />
      <img class="dpr3" src="img/rule@3x.png" /> </p>
    <ul class="rule">
      <li>1.邀请两位好友成为必胜公考新用户，好友注册成功后，备考大礼包将自动赠送至您的账号，请在“我的课程”中查看。您好友获赠的《公务员考试白皮书》也将自动发放至注册账号</li>
      <li>2.您的好友必须是从未注册过必胜公考的新用户</li>
      <li>3.如对活动有疑问，可在必胜公考-问答区提问</li>
    </ul>
    <p class="icon grey">
      <img class="dpr2" src="img/my_invi@2x.png" />
      <img class="dpr3" src="img/my_invi@3x.png" /> </p>
    <p class="fo">下载并注册登录软件即为注册成功</p>
    <ul id="invited" class="invi"><li class="empty"> <div class="circle_frame"></div> <h5>待邀请</h5> </li><li class="empty"> <div class="circle_frame"></div> <h5>待邀请</h5> </li> </ul>
  </div>
  <div id="mask"> </div>
</body>
<script type="text/javascript">
  if (getQueryString("is_h5") == 1) {
    window.location.assign("share.html"+ window.location.search);
  }
  $("#head").height($(this).width()*0.36875);
  var foundit=false;
  var timer = setInterval(function() {
    // 获取用户id
    if (!!window.getappuserid) {
      window.getappuserid.getUserID();
      if(window.user_id){
        clearInterval(timer);
        foundit = true;
        main();
      }
      return false;
    }
  }, 100);
  setTimeout(function(){
    if(!foundit){
      window.user_id=getQueryString('user_id');
      main();
    }
  },1000);
  // 页面逻辑
  function main() {
    window.imagelistner = {};
    $.ajax({
      url: urls.activity,
      type: 'get',
      data: {
        user_id: user_id,
        activity_id: urls.activity_id,
      },
      success: function(res) {
        if (res.code != 200) return false;
        var temp_html = '';
        // 固定两个位置
        for (var i = 0; i < 2; i++) {
          var who = res.invited_users[i];
          if (!who) {
            temp_html += '<li class="empty"> <div class="circle_frame"></div> <h5>待邀请</h5> </li>';
          } else {
            temp_html += '<li><div class="circle_frame"><img src="' + who.user.image_url + '"> </div><h5>' + who.user.username + '</h5>' + (who.user.status != '未完成' ? '<p class="fo">注册成功</p>' : '<p class="fo">未注册</p>') + '</li>';
          }
        }
        $("#invited").html(temp_html);
      }
    })
  }
  function goshare(){
    if(!window.getappuserid){
      alert("您已是老用户，请进入必胜公考APP参与本次活动");
    }else{
      $("#mask").show();
    }
  }
  $("#submit").on('click', function(){
    goshare();
  });
  $("#invited").on('click', 'li.empty', function(){
    goshare();
  });
  $("#mask").on('click',function(){
    $(this).hide();
  });
</script>

</html>
